<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ScarGrid - Exemplo Completo</title>
  <link rel="stylesheet" href="../src/css/scargrid.css">
  <!-- Módulos de features -->
  <script src="../src/features/pagination.js"></script>
  <script src="../src/features/sort.js"></script>
  <script src="../src/features/selection.js"></script>
  <script src="../src/features/filter.js"></script>
  <!-- Core -->
  <script src="../src/core/scargrid.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      background-color: #f5f5f5;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }

    .tablejs-container {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>
  <h1>TableJS - Biblioteca de Tabelas</h1>
  <p class="subtitle">Exemplo completo: busca, paginação, ordenação e seleção múltipla</p>

  <div style="margin-bottom: 20px;">
    <button onclick="handleGetSelected()" style="padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 8px;">
      Ver Selecionados
    </button>
    <button onclick="table.clearSelection()" style="padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 8px;">
      Limpar Seleção
    </button>
    <button onclick="table.selectRows([0, 1, 2])" style="padding: 8px 16px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 8px;">
      Selecionar 3 Primeiros
    </button>
    <button onclick="table.clearSearch()" style="padding: 8px 16px; background: #ffc107; color: #000; border: none; border-radius: 4px; cursor: pointer;">
      Limpar Busca
    </button>
  </div>

  <div class="tablejs-container">
    <div id="myTable"></div>
  </div>

  <script>
    // Dados de exemplo - 35 registros para demonstrar a paginação
    const sampleData = [
      { id: 1, nome: 'João Silva', email: 'joao@email.com', idade: 28, cidade: 'São Paulo', status: 'Ativo' },
      { id: 2, nome: 'Maria Santos', email: 'maria@email.com', idade: 34, cidade: 'Rio de Janeiro', status: 'Ativo' },
      { id: 3, nome: 'Pedro Oliveira', email: 'pedro@email.com', idade: 25, cidade: 'Belo Horizonte', status: 'Ativo' },
      { id: 4, nome: 'Ana Costa', email: 'ana@email.com', idade: 31, cidade: 'Curitiba', status: 'Inativo' },
      { id: 5, nome: 'Carlos Pereira', email: 'carlos@email.com', idade: 42, cidade: 'Porto Alegre', status: 'Ativo' },
      { id: 6, nome: 'Juliana Ferreira', email: 'juliana@email.com', idade: 29, cidade: 'Salvador', status: 'Ativo' },
      { id: 7, nome: 'Roberto Alves', email: 'roberto@email.com', idade: 37, cidade: 'Brasília', status: 'Ativo' },
      { id: 8, nome: 'Fernanda Lima', email: 'fernanda@email.com', idade: 26, cidade: 'Fortaleza', status: 'Inativo' },
      { id: 9, nome: 'Ricardo Souza', email: 'ricardo@email.com', idade: 33, cidade: 'Manaus', status: 'Ativo' },
      { id: 10, nome: 'Patricia Martins', email: 'patricia@email.com', idade: 30, cidade: 'Recife', status: 'Ativo' },
      { id: 11, nome: 'Bruno Rocha', email: 'bruno@email.com', idade: 27, cidade: 'Goiânia', status: 'Ativo' },
      { id: 12, nome: 'Camila Dias', email: 'camila@email.com', idade: 35, cidade: 'Belém', status: 'Inativo' },
      { id: 13, nome: 'Daniel Castro', email: 'daniel@email.com', idade: 29, cidade: 'Vitória', status: 'Ativo' },
      { id: 14, nome: 'Elaine Mendes', email: 'elaine@email.com', idade: 32, cidade: 'São Luís', status: 'Ativo' },
      { id: 15, nome: 'Felipe Nunes', email: 'felipe@email.com', idade: 24, cidade: 'Natal', status: 'Ativo' },
      { id: 16, nome: 'Gabriela Ramos', email: 'gabriela@email.com', idade: 36, cidade: 'Campo Grande', status: 'Inativo' },
      { id: 17, nome: 'Henrique Barros', email: 'henrique@email.com', idade: 28, cidade: 'Maceió', status: 'Ativo' },
      { id: 18, nome: 'Isabela Cardoso', email: 'isabela@email.com', idade: 31, cidade: 'João Pessoa', status: 'Ativo' },
      { id: 19, nome: 'José Fernandes', email: 'jose@email.com', idade: 40, cidade: 'Teresina', status: 'Ativo' },
      { id: 20, nome: 'Kelly Azevedo', email: 'kelly@email.com', idade: 27, cidade: 'Aracaju', status: 'Inativo' },
      { id: 21, nome: 'Leonardo Gomes', email: 'leonardo@email.com', idade: 34, cidade: 'Cuiabá', status: 'Ativo' },
      { id: 22, nome: 'Mariana Correia', email: 'mariana@email.com', idade: 29, cidade: 'Florianópolis', status: 'Ativo' },
      { id: 23, nome: 'Nicolas Pinto', email: 'nicolas@email.com', idade: 26, cidade: 'Porto Velho', status: 'Ativo' },
      { id: 24, nome: 'Olivia Barbosa', email: 'olivia@email.com', idade: 33, cidade: 'Boa Vista', status: 'Inativo' },
      { id: 25, nome: 'Paulo Moreira', email: 'paulo@email.com', idade: 38, cidade: 'Macapá', status: 'Ativo' },
      { id: 26, nome: 'Rafaela Teixeira', email: 'rafaela@email.com', idade: 30, cidade: 'Palmas', status: 'Ativo' },
      { id: 27, nome: 'Sergio Cavalcanti', email: 'sergio@email.com', idade: 35, cidade: 'Rio Branco', status: 'Ativo' },
      { id: 28, nome: 'Tatiana Vieira', email: 'tatiana@email.com', idade: 28, cidade: 'São Paulo', status: 'Inativo' },
      { id: 29, nome: 'Vinicius Araújo', email: 'vinicius@email.com', idade: 32, cidade: 'Rio de Janeiro', status: 'Ativo' },
      { id: 30, nome: 'Wesley Monteiro', email: 'wesley@email.com', idade: 27, cidade: 'Belo Horizonte', status: 'Ativo' },
      { id: 31, nome: 'Yasmin Santana', email: 'yasmin@email.com', idade: 25, cidade: 'Curitiba', status: 'Ativo' },
      { id: 32, nome: 'Zilda Freitas', email: 'zilda@email.com', idade: 41, cidade: 'Porto Alegre', status: 'Inativo' },
      { id: 33, nome: 'Amanda Ribeiro', email: 'amanda@email.com', idade: 29, cidade: 'Salvador', status: 'Ativo' },
      { id: 34, nome: 'Bernardo Silva', email: 'bernardo@email.com', idade: 36, cidade: 'Brasília', status: 'Ativo' },
      { id: 35, nome: 'Carolina Moura', email: 'carolina@email.com', idade: 31, cidade: 'Fortaleza', status: 'Ativo' }
    ];

    // Configuração das colunas
    const columns = [
      { 
        field: 'id', 
        title: 'ID',
        formatter: (value) => `#${value}`,
        filterType: 'number'
      },
      { 
        field: 'nome', 
        title: 'Nome Completo',
        filterType: 'text'
      },
      { 
        field: 'email', 
        title: 'E-mail',
        sortable: false,  // Esta coluna não será ordenável
        filterable: false  // Esta coluna não terá filtro
      },
      { 
        field: 'idade', 
        title: 'Idade',
        formatter: (value) => `${value} anos`,
        filterType: 'number'
      },
      { 
        field: 'cidade', 
        title: 'Cidade',
        filterType: 'select'  // Dropdown com cidades únicas
      },
      { 
        field: 'status', 
        title: 'Status',
        formatter: (value) => {
          const color = value === 'Ativo' ? '#28a745' : '#dc3545';
          return `<span style="color: ${color}; font-weight: 600;">●</span> ${value}`;
        },
        filterType: 'select'  // Dropdown: Todos, Ativo, Inativo
      }
    ];

    // Inicializa a grid com todas as funcionalidades
    const table = new ScarGrid('myTable', {
      data: sampleData,
      columns: columns,
      pagination: true,
      pageSize: 10,
      pageSizeOptions: [5, 10, 25, 50],
      sortable: true,       // Habilita ordenação
      selectable: true,     // Habilita seleção múltipla
      searchable: true,     // Habilita busca global
      columnFilters: true   // Habilita filtros por coluna
    });

    // Função para exibir registros selecionados
    function handleGetSelected() {
      const selected = table.getSelectedRows();
      const indices = table.getSelectedIndices();
      
      console.log('Linhas selecionadas:', selected);
      console.log('Índices selecionados:', indices);
      
      if (selected.length === 0) {
        alert('Nenhuma linha selecionada!');
      } else {
        const names = selected.map(row => row.nome).join(', ');
        alert(`${selected.length} linha(s) selecionada(s):\n\n${names}`);
      }
    }

    console.log('TableJS inicializada com sucesso!');
    console.log('Total de registros:', table.getData().length);
    console.log('Funcionalidades ativas: Busca, Paginação, Ordenação e Seleção Múltipla');
    console.log('Digite no campo de busca para filtrar os dados!');
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skargrid - Test Suite Completo</title>
    <link rel="stylesheet" href="../dist/skargrid.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8f9fa;
        }

        .test-suite-header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .test-suite-header h1 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }

        .test-suite-header p {
            margin: 0;
            color: #7f8c8d;
        }

        .test-tabs {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .tab-buttons {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }

        .tab-button {
            flex: 1;
            padding: 15px 20px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            background: #e9ecef;
            color: #495057;
        }

        .tab-button.active {
            color: #007bff;
            border-bottom-color: #007bff;
            background: white;
        }

        .tab-content {
            padding: 20px;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .test-section {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .test-section h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }

        .test-info {
            background: #e7f3ff;
            border: 1px solid #b3d7ff;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .test-info h4 {
            margin-top: 0;
            color: #0056b3;
        }

        .status-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-pass {
            background: #d4edda;
            color: #155724;
        }

        .status-fail {
            background: #f8d7da;
            color: #721c24;
        }

        .test-controls {
            margin-bottom: 20px;
        }

        .test-controls button {
            margin-right: 10px;
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            background: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .test-controls button:hover {
            background: #f8f9fa;
        }

        .test-controls button.primary {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }

        .test-controls button.primary:hover {
            background: #0056b3;
        }

        .performance-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }

        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }

        .metric-label {
            font-size: 12px;
            color: #6c757d;
            text-transform: uppercase;
            margin-top: 5px;
        }

        .code-example {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #007bff;
        }

        .feature-item h4 {
            margin-top: 0;
            color: #2c3e50;
        }

        .feature-item p {
            margin-bottom: 0;
            color: #6c757d;
            font-size: 14px;
        }

        .test-results {
            margin-top: 20px;
        }

        .test-result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .test-result-item:last-child {
            border-bottom: none;
        }

        .test-name {
            font-weight: 500;
        }

        .test-status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .test-status.pass {
            background: #d4edda;
            color: #155724;
        }

        .test-status.fail {
            background: #f8d7da;
            color: #721c24;
        }

        .test-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        @media (max-width: 768px) {
            .tab-buttons {
                flex-direction: column;
            }

            .performance-metrics {
                grid-template-columns: 1fr;
            }

            .feature-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="test-suite-header">
        <h1>üß™ Skargrid Test Suite</h1>
        <p>Teste completo de todas as funcionalidades do Skargrid - v1.3.0</p>
    </div>

    <div class="test-tabs">
        <div class="tab-buttons">
            <button class="tab-button active" onclick="showTab('basico')">B√°sico</button>
            <button class="tab-button" onclick="showTab('filtros')">Filtros</button>
            <button class="tab-button" onclick="showTab('virtualizacao')">Virtualiza√ß√£o</button>
            <button class="tab-button" onclick="showTab('performance')">Performance</button>
            <button class="tab-button" onclick="showTab('integracao')">Integra√ß√£o</button>
            <button class="tab-button" onclick="showTab('relatorio')">Relat√≥rio</button>
        </div>

        <!-- Aba B√°sico -->
        <div id="basico" class="tab-content active">
            <div class="test-section">
                <h3>üìã Teste B√°sico</h3>
                <div class="test-info">
                    <h4>Objetivo</h4>
                    <p>Verificar funcionamento b√°sico da tabela com dados simples, ordena√ß√£o e pagina√ß√£o.</p>
                </div>

                <div class="test-controls">
                    <button class="primary" onclick="runBasicTest()">Executar Teste</button>
                    <button onclick="resetBasicTest()">Reset</button>
                </div>

                <div id="basic-grid-container"></div>
            </div>
        </div>

        <!-- Aba Filtros -->
        <div id="filtros" class="tab-content">
            <div class="test-section">
                <h3>üîç Teste de Filtros Avan√ßados</h3>
                <div class="test-info">
                    <h4>Objetivo</h4>
                    <p>Testar filtros cascading, busca inteligente e isolamento de sele√ß√µes.</p>
                </div>

                <div class="test-controls">
                    <button class="primary" onclick="runFiltersTest()">Executar Teste</button>
                    <button onclick="resetFiltersTest()">Reset</button>
                </div>

                <div id="filters-grid-container"></div>
            </div>
        </div>

        <!-- Aba Virtualiza√ß√£o -->
        <div id="virtualizacao" class="tab-content">
            <div class="test-section">
                <h3>‚ö° Teste de Virtualiza√ß√£o</h3>
                <div class="test-info">
                    <h4>Objetivo</h4>
                    <p>Testar performance com grandes datasets (10k+ registros) usando virtualiza√ß√£o.</p>
                </div>

                <div class="test-controls">
                    <button class="primary" onclick="runVirtualizationTest()">Executar Teste</button>
                    <button onclick="resetVirtualizationTest()">Reset</button>
                </div>

                <div id="virtualization-grid-container" style="height: 400px;"></div>
            </div>
        </div>

        <!-- Aba Performance -->
        <div id="performance" class="tab-content">
            <div class="test-section">
                <h3>üìä M√©tricas de Performance</h3>
                <div class="performance-metrics" id="performance-metrics">
                    <div class="metric-card">
                        <div class="metric-value" id="render-time">--</div>
                        <div class="metric-label">Tempo de Renderiza√ß√£o (ms)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="memory-usage">--</div>
                        <div class="metric-label">Uso de Mem√≥ria (MB)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="filter-time">--</div>
                        <div class="metric-label">Tempo de Filtro (ms)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="sort-time">--</div>
                        <div class="metric-label">Tempo de Ordena√ß√£o (ms)</div>
                    </div>
                </div>

                <div class="test-controls">
                    <button class="primary" onclick="runPerformanceTest()">Executar Benchmark</button>
                    <button onclick="clearPerformanceMetrics()">Limpar M√©tricas</button>
                </div>
            </div>
        </div>

        <!-- Aba Integra√ß√£o -->
        <div id="integracao" class="tab-content">
            <div class="test-section">
                <h3>üîß Teste de Integra√ß√£o Completa</h3>
                <div class="test-info">
                    <h4>Objetivo</h4>
                    <p>Testar todas as funcionalidades juntas: filtros, ordena√ß√£o, pagina√ß√£o, sele√ß√£o, exporta√ß√£o.</p>
                </div>

                <div class="feature-list">
                    <div class="feature-item">
                        <h4>üéØ Filtros Cascading</h4>
                        <p>Filtros que se adaptam dinamicamente aos outros filtros aplicados</p>
                    </div>
                    <div class="feature-item">
                        <h4>üîç Busca Inteligente</h4>
                        <p>Busca com normaliza√ß√£o de acentos e isolamento de sele√ß√µes</p>
                    </div>
                    <div class="feature-item">
                        <h4>üìä Virtualiza√ß√£o</h4>
                        <p>Renderiza√ß√£o eficiente para datasets grandes</p>
                    </div>
                    <div class="feature-item">
                        <h4>üé® Temas</h4>
                        <p>Suporte a temas claro/escuro</p>
                    </div>
                    <div class="feature-item">
                        <h4>üíæ Persist√™ncia</h4>
                        <p>Salva configura√ß√µes no localStorage</p>
                    </div>
                    <div class="feature-item">
                        <h4>üì± Responsividade</h4>
                        <p>Adapta√ß√£o autom√°tica ao tamanho da tela</p>
                    </div>
                </div>

                <div class="test-controls">
                    <button class="primary" onclick="runIntegrationTest()">Executar Teste Completo</button>
                    <button onclick="resetIntegrationTest()">Reset</button>
                </div>

                <div id="integration-grid-container"></div>
            </div>
        </div>

        <!-- Aba Relat√≥rio -->
        <div id="relatorio" class="tab-content">
            <div class="test-section">
                <h3>üìã Relat√≥rio de Testes</h3>
                <div class="test-results" id="test-results">
                    <div class="test-result-item">
                        <span class="test-name">Teste B√°sico</span>
                        <span class="test-status pending" id="basic-test-status">Pendente</span>
                    </div>
                    <div class="test-result-item">
                        <span class="test-name">Teste de Filtros</span>
                        <span class="test-status pending" id="filters-test-status">Pendente</span>
                    </div>
                    <div class="test-result-item">
                        <span class="test-name">Teste de Virtualiza√ß√£o</span>
                        <span class="test-status pending" id="virtualization-test-status">Pendente</span>
                    </div>
                    <div class="test-result-item">
                        <span class="test-name">Teste de Performance</span>
                        <span class="test-status pending" id="performance-test-status">Pendente</span>
                    </div>
                    <div class="test-result-item">
                        <span class="test-name">Teste de Integra√ß√£o</span>
                        <span class="test-status pending" id="integration-test-status">Pendente</span>
                    </div>
                </div>

                <div class="test-controls">
                    <button class="primary" onclick="runAllTests()">Executar Todos os Testes</button>
                    <button onclick="generateReport()">Gerar Relat√≥rio</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../dist/skargrid.min.js"></script>
    <script>
        // Estado dos testes
        let testResults = {
            basic: null,
            filters: null,
            virtualization: null,
            performance: null,
            integration: null
        };

        // Dados de teste
        const sampleData = [
            { id: 1, nome: 'Jo√£o Silva', email: 'joao@email.com', cidade: 'S√£o Paulo', idade: 25, status: 'Ativo' },
            { id: 2, nome: 'Maria Santos', email: 'maria@email.com', cidade: 'Rio de Janeiro', idade: 30, status: 'Ativo' },
            { id: 3, nome: 'Pedro Oliveira', email: 'pedro@email.com', cidade: 'Belo Horizonte', idade: 28, status: 'Inativo' },
            { id: 4, nome: 'Ana Costa', email: 'ana@email.com', cidade: 'S√£o Paulo', idade: 35, status: 'Ativo' },
            { id: 5, nome: 'Carlos Lima', email: 'carlos@email.com', cidade: 'Rio de Janeiro', idade: 22, status: 'Ativo' },
            { id: 6, nome: 'Fernanda Alves', email: 'fernanda@email.com', cidade: 'S√£o Paulo', idade: 29, status: 'Inativo' },
            { id: 7, nome: 'Roberto Souza', email: 'roberto@email.com', cidade: 'Belo Horizonte', idade: 40, status: 'Ativo' },
            { id: 8, nome: 'Juliana Pereira', email: 'juliana@email.com', cidade: 'Rio de Janeiro', idade: 26, status: 'Ativo' }
        ];

        // Dados grandes para virtualiza√ß√£o
        const largeData = [];
        for (let i = 1; i <= 50000; i++) {
            largeData.push({
                id: i,
                nome: `Pessoa ${i}`,
                email: `pessoa${i}@email.com`,
                cidade: ['S√£o Paulo', 'Rio de Janeiro', 'Belo Horizonte', 'Porto Alegre', 'Salvador'][Math.floor(Math.random() * 5)],
                idade: Math.floor(Math.random() * 60) + 18,
                status: Math.random() > 0.3 ? 'Ativo' : 'Inativo'
            });
        }

        // Fun√ß√µes de navega√ß√£o entre abas
        function showTab(tabId) {
            // Esconder todas as abas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Mostrar aba selecionada
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }

        // Fun√ß√£o para atualizar status dos testes
        function updateTestStatus(testName, status) {
            testResults[testName] = status;
            const statusElement = document.getElementById(`${testName}-test-status`);
            statusElement.textContent = status === 'pass' ? 'Aprovado' : status === 'fail' ? 'Reprovado' : 'Pendente';
            statusElement.className = `test-status ${status}`;
        }

        // Teste B√°sico
        function runBasicTest() {
            try {
                const container = document.getElementById('basic-grid-container');
                container.innerHTML = '';

                new Skargrid('basic-grid-container', {
                    data: sampleData,
                    columns: [
                        { field: 'id', title: 'ID', width: '60px' },
                        { field: 'nome', title: 'Nome' },
                        { field: 'email', title: 'Email' },
                        { field: 'cidade', title: 'Cidade' },
                        { field: 'idade', title: 'Idade', width: '80px' },
                        { field: 'status', title: 'Status', width: '100px' }
                    ],
                    pagination: true,
                    pageSize: 5,
                    sortable: true
                });

                updateTestStatus('basic', 'pass');
                alert('‚úÖ Teste b√°sico executado com sucesso!');
            } catch (error) {
                console.error('Erro no teste b√°sico:', error);
                updateTestStatus('basic', 'fail');
                alert('‚ùå Erro no teste b√°sico: ' + error.message);
            }
        }

        function resetBasicTest() {
            document.getElementById('basic-grid-container').innerHTML = '';
            updateTestStatus('basic', null);
        }

        // Teste de Filtros
        function runFiltersTest() {
            try {
                const container = document.getElementById('filters-grid-container');
                container.innerHTML = '';

                new Skargrid('filters-grid-container', {
                    data: sampleData,
                    columns: [
                        { field: 'id', title: 'ID', width: '60px' },
                        { field: 'nome', title: 'Nome', filterable: true },
                        { field: 'email', title: 'Email', filterable: true },
                        { field: 'cidade', title: 'Cidade', filterable: true, type: 'select' },
                        { field: 'idade', title: 'Idade', width: '80px', filterable: true, type: 'number' },
                        { field: 'status', title: 'Status', width: '100px', filterable: true, type: 'select' }
                    ],
                    columnFilters: true,
                    searchable: true,
                    pagination: true,
                    pageSize: 5
                });

                updateTestStatus('filters', 'pass');
                alert('‚úÖ Teste de filtros executado com sucesso!');
            } catch (error) {
                console.error('Erro no teste de filtros:', error);
                updateTestStatus('filters', 'fail');
                alert('‚ùå Erro no teste de filtros: ' + error.message);
            }
        }

        function resetFiltersTest() {
            document.getElementById('filters-grid-container').innerHTML = '';
            updateTestStatus('filters', null);
        }

        // Teste de Virtualiza√ß√£o
        function runVirtualizationTest() {
            try {
                const container = document.getElementById('virtualization-grid-container');
                container.innerHTML = '';

                new Skargrid('virtualization-grid-container', {
                    data: largeData.slice(0, 10000), // Usar 10k registros para teste
                    columns: [
                        { field: 'id', title: 'ID', width: '80px' },
                        { field: 'nome', title: 'Nome' },
                        { field: 'email', title: 'Email' },
                        { field: 'cidade', title: 'Cidade', filterable: true, type: 'select' },
                        { field: 'idade', title: 'Idade', width: '80px' },
                        { field: 'status', title: 'Status', width: '100px', filterable: true, type: 'select' }
                    ],
                    virtualization: true,
                    columnFilters: true,
                    pagination: false, // Desabilitar pagina√ß√£o com virtualiza√ß√£o
                    sortable: true
                });

                updateTestStatus('virtualization', 'pass');
                alert('‚úÖ Teste de virtualiza√ß√£o executado com sucesso!');
            } catch (error) {
                console.error('Erro no teste de virtualiza√ß√£o:', error);
                updateTestStatus('virtualization', 'fail');
                alert('‚ùå Erro no teste de virtualiza√ß√£o: ' + error.message);
            }
        }

        function resetVirtualizationTest() {
            document.getElementById('virtualization-grid-container').innerHTML = '';
            updateTestStatus('virtualization', null);
        }

        // Teste de Performance
        function runPerformanceTest() {
            const startTime = performance.now();

            try {
                // Criar container tempor√°rio
                const tempContainer = document.createElement('div');
                tempContainer.id = 'temp-performance-container';
                tempContainer.style.display = 'none';
                document.body.appendChild(tempContainer);

                // Teste de renderiza√ß√£o
                const grid = new Skargrid('temp-performance-container', {
                    data: largeData.slice(0, 5000),
                    columns: [
                        { field: 'id', title: 'ID', width: '80px' },
                        { field: 'nome', title: 'Nome' },
                        { field: 'email', title: 'Email' },
                        { field: 'cidade', title: 'Cidade' },
                        { field: 'idade', title: 'Idade', width: '80px' },
                        { field: 'status', title: 'Status', width: '100px' }
                    ],
                    virtualization: true
                });

                const renderTime = performance.now() - startTime;

                // Atualizar m√©tricas
                document.getElementById('render-time').textContent = renderTime.toFixed(2);
                document.getElementById('memory-usage').textContent = (performance.memory ? (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2) : 'N/A');
                document.getElementById('filter-time').textContent = '--';
                document.getElementById('sort-time').textContent = '--';

                // Remover container tempor√°rio
                document.body.removeChild(tempContainer);
                updateTestStatus('performance', 'pass');
                alert('‚úÖ Teste de performance executado com sucesso!');
            } catch (error) {
                console.error('Erro no teste de performance:', error);
                updateTestStatus('performance', 'fail');
                alert('‚ùå Erro no teste de performance: ' + error.message);
            }
        }

        function clearPerformanceMetrics() {
            document.getElementById('render-time').textContent = '--';
            document.getElementById('memory-usage').textContent = '--';
            document.getElementById('filter-time').textContent = '--';
            document.getElementById('sort-time').textContent = '--';
            updateTestStatus('performance', null);
        }

        // Teste de Integra√ß√£o Completa
        function runIntegrationTest() {
            try {
                const container = document.getElementById('integration-grid-container');
                container.innerHTML = '';

                new Skargrid('integration-grid-container', {
                    data: sampleData,
                    columns: [
                        { field: 'id', title: 'ID', width: '60px' },
                        { field: 'nome', title: 'Nome', filterable: true },
                        { field: 'email', title: 'Email', filterable: true },
                        { field: 'cidade', title: 'Cidade', filterable: true, type: 'select' },
                        { field: 'idade', title: 'Idade', width: '80px', filterable: true, type: 'number' },
                        { field: 'status', title: 'Status', width: '100px', filterable: true, type: 'select' }
                    ],
                    columnFilters: true,
                    searchable: true,
                    pagination: true,
                    pageSize: 3,
                    sortable: true,
                    selectable: true,
                    exportCSV: true,
                    exportFilename: 'teste-integracao',
                    theme: 'light'
                });

                updateTestStatus('integration', 'pass');
                alert('‚úÖ Teste de integra√ß√£o executado com sucesso!');
            } catch (error) {
                console.error('Erro no teste de integra√ß√£o:', error);
                updateTestStatus('integration', 'fail');
                alert('‚ùå Erro no teste de integra√ß√£o: ' + error.message);
            }
        }

        function resetIntegrationTest() {
            document.getElementById('integration-grid-container').innerHTML = '';
            updateTestStatus('integration', null);
        }

        // Executar todos os testes
        function runAllTests() {
            runBasicTest();
            setTimeout(() => runFiltersTest(), 1000);
            setTimeout(() => runVirtualizationTest(), 2000);
            setTimeout(() => runPerformanceTest(), 3000);
            setTimeout(() => runIntegrationTest(), 4000);
        }

        // Gerar relat√≥rio
        function generateReport() {
            const passed = Object.values(testResults).filter(result => result === 'pass').length;
            const total = Object.keys(testResults).length;

            alert(`üìã Relat√≥rio de Testes\n\nTestes Aprovados: ${passed}/${total}\n\n${passed === total ? 'üéâ Todos os testes passaram!' : '‚ö†Ô∏è Alguns testes falharam. Verifique o console para detalhes.'}`);
        }

        // Inicializar com teste b√°sico
        document.addEventListener('DOMContentLoaded', function() {
            // Pequeno delay para garantir que o DOM est√° pronto
            setTimeout(() => {
                runBasicTest();
            }, 100);
        });
    </script>
</body>
</html>
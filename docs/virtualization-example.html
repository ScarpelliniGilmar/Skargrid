<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkarGrid Virtual Scrolling Example</title>
    <link rel="stylesheet" href="../dist/skargrid.min.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .demo-info { margin-bottom: 20px; padding: 15px; background: #f0f9ff; border-left: 4px solid #007acc; border-radius: 4px; }
        .demo-info h3 { margin-top: 0; color: #007acc; }
        .scroll-indicator { margin-top: 10px; padding: 10px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; font-size: 14px; }
        .stats { margin-top: 10px; font-size: 12px; color: #666; }
    </style>
</head>
<body>
    <h1>SkarGrid Virtual Scrolling Demo</h1>

    <div class="demo-info">
        <h3>Virtual Scrolling for Large Datasets</h3>
        <p>This demo shows <strong>10,000 rows</strong> with virtual scrolling enabled. Only visible rows are rendered for optimal performance.</p>
        <p><strong>How it works:</strong> As you scroll, new rows are dynamically rendered while old ones are removed. The scrollbar represents all 10,000 rows.</p>
        <p><strong>Features:</strong> Search, sorting, selection, filters, and export work with virtual scrolling!</p>
        <p><strong>Use case:</strong> When you have very large datasets (thousands to millions of rows) and need smooth scrolling performance.</p>
        <div class="scroll-indicator">
            <strong>Try it:</strong> Scroll down to see more rows appear. Notice how the scrollbar shows the full 10,000 rows but only ~25 are rendered at once.
        </div>
        <div class="stats" id="stats">Loading...</div>
    </div>

    <div id="grid1" style="height: 500px;"></div>

    <script src="../dist/skargrid.min.js"></script>
    <script>
        // Generate 10,000 sample rows
        const generateLargeDataset = () => {
            const data = [];
            const firstNames = ['John', 'Jane', 'Bob', 'Alice', 'Charlie', 'Diana', 'Eve', 'Frank', 'Grace', 'Henry'];
            const lastNames = ['Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Garcia', 'Miller', 'Davis', 'Rodriguez', 'Martinez'];
            const cities = ['New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix', 'Philadelphia', 'San Antonio', 'San Diego', 'Dallas', 'San Jose'];

            for (let i = 1; i <= 10000; i++) {
                data.push({
                    id: i,
                    name: `${firstNames[Math.floor(Math.random() * firstNames.length)]} ${lastNames[Math.floor(Math.random() * lastNames.length)]}`,
                    age: Math.floor(Math.random() * 60) + 18,
                    city: cities[Math.floor(Math.random() * cities.length)],
                    salary: Math.floor(Math.random() * 100000) + 30000
                });
            }
            return data;
        };

        const grid = new Skargrid('grid1', {
            data: generateLargeDataset(),
            columns: [
                { field: 'id', title: 'ID', width: 80 },
                { field: 'name', title: 'Name', width: 200 },
                { field: 'age', title: 'Age', width: 80 },
                { field: 'city', title: 'City', width: 150 },
                { field: 'salary', title: 'Salary', width: 120, render: (value) => `$${value.toLocaleString()}` }
            ],
            virtualization: true, // Enable virtual scrolling
            searchable: true,
            sortable: true,
            selectable: true,
            columnFilters: true,
            exportCSV: true,
            columnConfig: true
        });

        // Update stats
        const updateStats = () => {
            const container = document.querySelector('.skargrid-table-container');
            if (container) {
                const scrollTop = container.scrollTop;
                const scrollHeight = container.scrollHeight;
                const clientHeight = container.clientHeight;
                const scrollPercent = Math.round((scrollTop / (scrollHeight - clientHeight)) * 100);

                const renderedRows = document.querySelectorAll('#grid1 tbody tr:not([style*="height"])').length;
                const totalRows = grid.getData().length;

                document.getElementById('stats').innerHTML = `
                    <strong>Stats:</strong> ${renderedRows} rows rendered | ${totalRows} total rows | Scrolled ${scrollPercent}%
                `;
            }
        };

        // Update stats on scroll
        setTimeout(() => {
            const container = document.querySelector('.skargrid-table-container');
            if (container) {
                container.addEventListener('scroll', updateStats);
                updateStats();
            }
        }, 100);

        console.log('Virtual scrolling enabled! Scroll to see dynamic row rendering.');
    </script>
</body>
</html>